# 预处理算法

## 预处理总结

首先，我们参考了一些论文中的处理，做了如下处理：

1. 将缩写替换成本来的单词，如`can't`变为`cannot`。
2. 去除 URL，这对判断情感并无作用，其中的一些杂乱字符还有可能干扰情感判断。
3. 表情符号处理，现在的网络交流中，表达的方式很多变，表情则往往有效地帮助明确一句话的情感。我们考虑直接将表情替换为`PositiveSentiment`或`NegativeSentiment`。
4. 否定处理，在有否定含义的句子中，使用自然语言工具包（nltk）给一些词前面加上`NOT_`。
5. 去除 stop words，包括代码中的关键字等。
   1. 去除代码片段，数据集中无疑有很多直接拷贝代码的情况，这些代码并不表示任何情感，也包括 HTML 标签，MarkDown 标签等。我们使用正则匹配删去了这些字符串。

6. 词干提取。为了帮助模型更好地理解语义，我们将单词的词干、基本形式或根形式提取出来。

## 实验

- 使用助教指定的训练集和测试集（由数据集 `sof4423` 预划分而来），TF-IDF 进行文本向量化，GradientBoostingClassifier 分类器，与不同的预处理算法进行组合进行实验
- SentiCR 中原有的预处理方法有：word stem，对表情符号，缩写，否定的处理，去除了 url，md 图片，html 标签
- 我们新加的预处理方法有：
  - 将文本中的专有词和实体词用标签替代
  - 处理斜体和大写单词
  - 处理在软工领域有特别含义的单词，如：support, bug, error
- 实验数据：（详细数据见 result.md）

| 预处理方法                               | 预测准确率    |
| ---------------------------------------- | ------------- |
| 原有方法                                 | 82.50%/82.88% |
| 原有方法 + 替换专有词和实体词              | 81.90%        |
| 原有方法 + 处理领域特定单词                | 82.65%        |
| 原有方法 + 处理斜体                        | 82.43%        |
| 原有方法 + 处理大写                        | 82.58%        |
| 原有方法 + 处理斜体、大写                  | 82.80%/82.58% |
| 原有方法 + 处理斜体、大写 + 处理领域特定单词 | 82.65%/82.58% |

- 实验结论：在 TF-IDF 和 GradientBoostingClassifier 的条件下，预处理算法对于结果的影响不大。

## 预处理算法改进方向

1. 特殊处理斜体、大写、重复
2. 处理软工领域特定词汇，如 support，error，crash，bug，fix，这些单词在软工领域的意思更加中立
3. 词性分析，已识别是在描述客观事实还是在表达情绪
